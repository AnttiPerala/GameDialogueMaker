<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Dialogue Maker</title>

    <link rel="stylesheet" href="styles.css">


    <style>

    </style>

</head>

<body>

    <div id="header">

        <!-- Tooltips are simply added to the title properties -->

        <div id="siteTitle"
            title="Click on the plus button to add new elements. ">
            Dialogue Maker
            <div id="about"><a href="about.html">ABOUT</a></div>
        </div>

        <div id="hamburger-menu" onclick="toggleMenu()">
            â˜°
        </div>


        <div id="ui">

            <div class="uiElem">
                <p title="Click here to add new elements.">ADD CHARACTER TREE</p>
                <a href="#" title="Click here to add new elements.">
                    <div class="plus">+</div>
                </a>
            </div>

            <!-- <div class="uiElem">
                <p title="Change the size of the selected element">BLOCK SIZE</p>
                <input type="range" min="25" max="1000" value="200" name="blocksize" id="blocksize">
            </div> -->
            <div class="uiElem">
                <p class="uiElemTitle" title="Zoom the canvas">ZOOM</p>
                <input type="range" min="1" max="200" value="100" name="zoomAmount" id="zoomAmount" class="btnSmall">
            </div>
            <div class="uiElem">
                <p class="uiElemTitle" title="Change the color of the selected element">PICK COLOR</p>
                <input type="color" id="blockColor" name="blockColor" value="#DC143C" class="btnSmall">
            </div>
            <div id="stylebrush" class="uiElem">
                <p class="uiElemTitle" title="Copy the style of the selected element to other elements by clicking on them with this tool">
                    CLONE STYLE</p>
                <img src="img/iconmonstr-paintbrush-3-64.png" width="32px" alt="" class="btnSmall">
            </div>
            <div id="playMode" class="uiElem">
                <p class="uiElemTitle" title="Start playback from selected node.">
                    PLAY MODE</p>
                <img src="img/iconmonstr-video-15-32.png" width="32px" alt="" class="btnSmall">
            </div>
            <div id="eraser" class="uiElem">
                <p class="uiElemTitle" title="Erase blocks or lines by clicking on them with this tool">ERASE</p>
                <img src="img/iconmonstr-eraser-1-48.png" width="32" alt="" class="btnSmall">
            </div>
            <div id="save" class="uiElem">
                <p class="uiElemTitle" title="Save the mindmap to browser localstorage so that a page refresh won't delete it">SAVE PAGE</p>
                <img src="img/iconmonstr-save-3-32.png" width="32" alt="" class="btnSmall">
            </div>
            <div id="delete" class="uiElem">
                <p class="uiElemTitle" title="Delete the saved mindmap from localstorage.">DELETE SAVE</p>
                <img src="img/iconmonstr-x-mark-6-32.png" width="32" alt="" class="btnSmall">
            </div>

            <div id="export" class="uiElem">
                <p class="uiElemTitle" title="Export the data in your desired format. The export format can be changed under settings.">EXPORT FILE</p>
                <img src="img/iconmonstr-log-out-18-32.png" width="32" alt="" class="btnSmall">
            </div>

            <div id="openFile" class="uiElem">
                <p class="uiElemTitle" title="Open previously exported JSON file or TXT file">OPEN FILE</p>
                <img src="img/iconmonstr-folder-20-32.png" width="32" alt="" class="btnSmall">
            </div>

            <div id="showManual" class="uiElem">
                <p class="uiElemTitle" title="Show the instruction manual">OPEN MANUAL</p>
                <img src="img/iconmonstr-book-11-32.png" width="32" alt="" class="btnSmall">
            </div>

            <div id="openSettings" class="uiElem">
                <p class="uiElemTitle" title="Open settings">OPEN SETTINGS</p>
                <img src="img/iconmonstr-gear-6-32.png" width="32" alt="" class="btnSmall">
            </div>

            <div id="settingsArea">
                <div id="settingExportFormat" class="individualSetting">
                    Export format:
                    <form id="formatSelection">
                        <label>
                            <input type="radio" name="format" value="json" checked> JSON
                        </label>
                        <br>
                        <label>
                            <input type="radio" name="format" value="plainText"> Plain text
                        </label>
                    </form>
                </div>


                <div id="settingAutoLayout" class="individualSetting">
                    Layout nodes automatically
                    <button id="settingsButtonAutoLayout" class="btn">Layout nodes</button>
                </div>

            </div><!-- close settingsArea -->

        </div><!-- close ui -->

    </div>
 <div id="tutorial">

            <h1>INSTRUCTIONS</h1>
            <h2>Here's some information on how to use the app:</h2>
            <p>This app is meant to work together with the official Construct 3 tutorial from Laura_D called <a
                    href="https://www.construct.net/en/tutorials/branching-dialogue-using-json-2395/branching-dialogue-4">Branching
                    Dialogue Using Json:</a></p>

            <p>Please note, this is still very much an alpha version so expect bugs and things breaking! Collaborators
                are warmly welcomed!</p>

            <p>The basic idea is to create character dialogue trees from the big plus button at the top. When you have
                the first node of a dialogue tree, you can add more dialogue blocks to it from the smaller plus button
                in the node. You can also change the type of the node to "question" in order to add a question with
                branching answers.</p>

            <p>When you are done with you dialogue tree, you can export it as a JSON file from the export button at the
                top bar. You should be able to then take this file to Construct 3 and especially to the tutorial
                .c3p-file created by Laura_D. Simply import as a project file and replace the existing json file import
                in the eGame event sheet on even 2 (action: -> AJAX: Request dialogue.json (tag "LoadDialogue"))</p>

            <p>The characters get assigned a dialogue from the JSON based on their "SceneID" instance variable value.
            </p>

            <h3>Some things to note:</h3>
            <p>You can drag the dialogues around to arrange them the way you prefer. Dragging a parent dialogue will
                also move the children. You can also move the entire canvas by dragging from an empty area.</p>
            <p>Changing the name of the character in one dialogue tree will change it for all the nodes. If you want
                another character in the same JSON file export, use another dialogue tree.</p>
            <p>The "next" value tells Construct which node it should go to after the current one. We are automatically
                setting it to the next child node if the user has created one. If there is no child node, then the user
                can define where to go next by setting the value manually. </p>
            <p>The ID for each node is automatically assigned and I don't recommend changing them for now. </p>
            <p>Adding line breaks in the text are of the node will separate those into different dialogues in Construct,
                meaning that they will be displayed separately one-by-one. That way you can make sure large texts fit
                the dialogue box design of your game. </p>

                <h3>Known bugs:</h3>
                <ul>
                    <li>Plain Text import only works for a single character at the moment</li>
                    <li>When zooming the page back and forth the lines can get dislocated. A page refresh should fix the issue.</li>
                

                </ul>

                <h3>Important info for developers:</h3>
                <ul>
      
                    <li>Always make the change in the master object called gameDialogueMakerProject and then update DOM. Otherwise there will be issues.</li>
                

                </ul>

            <h3>TO DO:</h3>
            <ul>
                
               <li>only update visible lines for better performance</li>
               <li>Add button that will auto-position nodes</li>
                <li>Proper mobile support</li>
                <li>Mouse wheel zoom</li>
                <li>Generic JSON exporter for other game engines</li>
                <li>Automatic splitting of long dialogues based on character count treshold setting</li>
                <li>Smart reordering of IDs based on user input</li>
                <li>Allow answer nodes to only connect to question nodes</li>

   
            </ul>


        </div>
    <div id="mainArea">

        <!-- Inside #mainArea -->
<svg id="connectionLayer" style="position:absolute; top:0; left:0; width:5000px; height:5000px; pointer-events:none; overflow:visible;">
    <defs>
        <!-- Arrowhead marker -->
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#0075ff" />
        </marker>
    </defs>
</svg>

       


       

    </div><!-- End main area -->



    <script src="js/libs/jquery-3.6.0.min.js"></script>
    <script src="js/libs/jquery-ui.min.js"></script>
    <script src="js/libs/jquery.ui.touch-punch.min.js"></script>
    <script src="js/libs/lodash.js"></script><!-- for debugging -->
    <script src="js/libs/html2canvas.min.js"></script>
    <script src="js/customWindowResizeEvent.js"></script>
    <script src="js/libs/leader-line.min.js"></script>
    <script src="js/libs/leader-line.min.js"></script>
    <script src="js/documentReady.js"></script>
    <script src="js/globalFunctions.js"></script>
    <script src="js/exampleObject.js"></script>
    <script src="js/findingNestedObjects.js"></script>
    <script src="js/globalVars.js"></script>
    <script src="js/drawDialogueBox.js"></script>
    <script src="js/deleteWithEraser.js"></script>
    <script src="js/consoleLogPrioritySystem.js"></script>
    <script src="js/mouseDownOverTopConnectionSocket.js"></script>
    <script src="js/drawDialogueMakerProject.js"></script> 
    <script src="js/strictSelectPlugin.js"></script>
    <script src="js/updateLines2.js"></script>
    <script src="js/updateElementPositionInObject.js"></script>
    <script src="js/storeMasterObjectToLocalStorage.js"></script>
    <script src="js/createDialogueNode.js"></script>
    <script src="js/autoResize.js"></script>
    <script src="js/htmlContentDefinitions.js"></script>
    <script src="js/handleEvents.js"></script>
    <script src="js/createLines.js"></script>
    <script src="js/main2.js"></script>
    <script src="js/autoLayoutNodes.js"></script>
    <script src="js/exportJson.js"></script>
    <script src="js/exportAsText.js"></script>
    <script src="js/loadFile.js"></script>
    <script src="js/undo.js"></script>
    <script src="js/addNewBlockFromPlusButton.js"></script>
    <script src="js/drawConditionCircleOnPath.js"></script>
    <script src="js/throttle.js"></script>
    <script src="js/repositionElementAfterChangeInParent.js"></script>
    <script src="js/hideAndShowElementTree.js"></script>
    <script src="js/checkIfPlusButtonShouldBeTurnedOff.js"></script>
    <script src="js/playMode.js"></script>
    <script src="js/debug.js"></script>
    <script src="js/calculateNewPositionAfterElementParentChange.js"></script>


    


</body>

</html>